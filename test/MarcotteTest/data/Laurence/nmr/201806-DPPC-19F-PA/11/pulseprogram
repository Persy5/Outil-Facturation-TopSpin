# 1 "C:/Bruker/TopSpin3.5pl7/exp/stan/nmr/lists/pp/user/DWflexecho19F"
;DWflexecho for 19F baseline correction 08/2018
;with ability to chose different p1 and p2 pulses
;
;TS3 / 03.06.2011
;
;checked by SEWE 03.06.2011
;
;90-90 solid echo sequence for wide line observation
;better than Hahn echo especially when insufficiant (90) power
;
; In MAS experiments, echo delay is set to be an integer number of rotor periods
; Acquisition starts after X degree pulse to be able to sample whole echo
; Set parameter nsp equal to number of points before echo-top
; digmod: digital; dspfirm: smooth
; phc0=0 and phc1=d6*swh*360 should give phased spectrum
; sine bell or squared sine bell processing window functions may be used
; for static experiments enter cnst31 = 1e6 and set l1 to desired echo delay in us
;
;parameters:
;pl1 : RF power level for 90
;p1 : 90 degree pulse
;p2 : X degree pulse (90 in solid echo; 180 in Hahn echo or anything else)
;d1 : recycle delay
;d6 : first echo delay (calculated)
;d7 : second echo delay (adjustable)
;cnst31 : =MAS spin rate in Hz (or =1e6 for static)
;l1 : # of rotor cycles (or tau in us)
;ns : 8*n

;$CLASS=Solids
;$DIM=1D
;$TYPE=direct excitation
;$SUBTYPE=simple 1D
;$COMMENT=90-90 solid echo sequence for wide line observation

;"d6=((1s*l1)/cnst31)-p1"
;cnst11 : to adjust t=0 for acquisition, if digmod = baseopt
"acqt0=0";
# 1 "mc_line 40 file C:/Bruker/TopSpin3.5pl7/exp/stan/nmr/lists/pp/user/DWflexecho19F exp. def. part of mc cmd. before ze"
; dimension 1D; AQ_mode 
define delay MCWRK
define delay MCREST
"MCREST = 30m - 30m"
"MCWRK = 0.333333*30m"

    dccorr
# 40 "C:/Bruker/TopSpin3.5pl7/exp/stan/nmr/lists/pp/user/DWflexecho19F"
# 40 "C:/Bruker/TopSpin3.5pl7/exp/stan/nmr/lists/pp/user/DWflexecho19F"
1 ze
# 1 "mc_line 40 file C:/Bruker/TopSpin3.5pl7/exp/stan/nmr/lists/pp/user/DWflexecho19F exp. def. of mc cmd. after ze"
# 41 "C:/Bruker/TopSpin3.5pl7/exp/stan/nmr/lists/pp/user/DWflexecho19F"
# 1 "mc_line 41 file C:/Bruker/TopSpin3.5pl7/exp/stan/nmr/lists/pp/user/DWflexecho19F exp. start label for mc cmd."
2 MCWRK  * 2
LBLF0, MCWRK
  MCREST
# 42 "C:/Bruker/TopSpin3.5pl7/exp/stan/nmr/lists/pp/user/DWflexecho19F"
  d1
  p1 ph1
  d6
  p2 ph2
  d7
  go=2 ph31
# 1 "mc_line 48 file C:/Bruker/TopSpin3.5pl7/exp/stan/nmr/lists/pp/user/DWflexecho19F exp. mc cmd. in line"
  MCWRK wr #0
  MCWRK zd
  lo to LBLF0 times td0

# 49 "C:/Bruker/TopSpin3.5pl7/exp/stan/nmr/lists/pp/user/DWflexecho19F"
exit

ph1= 0 3 2 1 0 3 2 1
ph2= 3 2 1 0 1 0 3 2
ph31= 3 2 1 0 3 2 1 0

; ph1=0 2 2 0 1 3 3 1
; ph31=0 2 2 0 1 3 3 1
# 58 "C:/Bruker/TopSpin3.5pl7/exp/stan/nmr/lists/pp/user/DWflexecho19F"
;$id: $
